@model Libraary.Web.Models.Books.BookDetailsViewModel
@{
    ViewData["Title"] = "Home Page";
}

<main class="mt-3">
    <h1 class="text-center">Book Details for @Model.Name</h1>
    <hr>
    <div class="mx-auto">
        <div class="d-flex justify-content-around">
            <div class="d-flex flex-column">
                <img src="@Model.Picture" width="80" height="80" />
            </div>
            <div class="d-flex flex-column">
                <h2 class="text-center">Author</h2>
                <h3 class="text-center mt-1">@string.Join(", ", Model.Authors)</h3>
            </div>
            <div class="d-flex flex-column">
                <h2 class="text-center">Publisher</h2>
                <h3 class="text-center mt-1">@Model.Publisher</h3>
            </div>
        </div>
        <hr>
        <div class="w-75 mx-auto d-flex justify-content-between">
            <div class="d-flex flex-column w-50">
                <h2 class="text-center">Rating</h2>
                <h3 class="text-center mt-1">@Model.Rating</h3>
            </div>
            <div class="d-flex flex-column w-50">
                <h2 class="text-center">Rented</h2>
                <h3 class="text-center mt-1">@Model.IsRented</h3>
            </div>
        </div>
        <hr class="w-75">
        <div class="w-75 mx-auto d-flex justify-content-between">
            <div class="d-flex flex-column w-50">
                <h2 class="text-center">Category</h2>
                <h3 class="text-center mt-1">@string.Join(", ", Model.Categories)</h3>
            </div>
            <div class="d-flex flex-column w-50">
                <h2 class="text-center">Summary</h2>
                <h3 class="text-center mt-1">@Model.Summary</h3>
            </div>
        </div>
        @if (User.IsInRole("Librarian") && Model.IsRented)
        {
            <div class="w-75 mx-auto d-flex justify-content-between">
                <div class="d-flex flex-column w-50">
                    <h2 class="text-center">Rented by</h2>
                    <h3 class="text-center mt-1">@Model.User</h3>
                </div>
                <div class="d-flex flex-column w-50">
                    <h2 class="text-center">Rented on</h2>
                    <h3 class="text-center mt-1">@Model.RentDate</h3>
                </div>
            </div>
        }
    </div>
    @if (User.IsInRole("User") && Model.IsRented == false)
    {
        <div>
            <a asp-controller="Users"
               asp-action="Rent"
               asp-route-bookId="@Model.Id"
               class="btn btn-outline-info"
               role="button">
                Rent
            </a>
        </div>
    }
    <form asp-controller="Books" asp-action="Rating" method="post">
        <h4>Star Rating</h4>
        <hr />
        <div class="form-group">
            <label asp-for="Rating" class="col-lg-2 col-sm-2">Rating</label>
            <div class="col-lg-8">
                <span class="rating">
                    @for (var i = 1; i <= 5; i++)
                    {
                        var starClass = "star";
                        if (Model.Rating == 6 - i)
                        {
                            starClass += " active";
                        }
                        <span data-value="@(6 - i)" class="@starClass"></span>
                    }
                </span>
            </div>
            <input asp-for="Rating" type="hidden" />
            <input asp-for="Id" type="hidden" />
        </div>
        <div class="form-group">
            <div class="col-md-10">
                <input type="submit" class="btn btn-primary" value="Submit" />
            </div>
        </div>
    </form>
</main>